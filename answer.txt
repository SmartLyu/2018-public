显示英文版本帮助
   LANG=en_US.UTF-8 命令 --help
显示中文版本帮助
   LANG=zh_CN.UTF-8 命令 --help




虚拟化
    定义： 把一个或者多个物理资源转换成一个或者多个逻辑资源，这些逻辑资源就可以用来创建虚拟机
    详细解释： 可以一个物理机中创建多个虚拟机，也可以多个物理机转换成一个虚拟机，但是因为网络速度远远打不到CPU的运行速度，所以一般不把多个真机制作为一个虚拟机
    一般 Linux 使用 KVM虚拟化

各个公司的虚拟化软件
VMware	VMware Workstation、vSphere
Microsoft	VirtualPC、Hyper-V
RedHat	KVM、RHEV
Citrix	Xen
Oracle	Oracle VM VirtualBox





KVM虚拟化
    简介：KVM只是一个linux的内核模块，是内核用来实现虚拟化的一个技术模块，具体操作需要其他软件辅助完成，它的使用需要 CPU 的支持，通过一些硬件相关技术打成虚拟化，包括CPU方面的Intel-VT,AMD-V、以及内存相关的Intel的 EPT 和 AMD 的 RVI
！
    仿真工具Qemu ，用于操作内核运行的工具，
    接口工具Libvirt
    关系

！
    安装软件： qemu-kvm libvirt-daemon libvirt-client libvirt-daemon-diver-qemu
    选择安装： 





virsh命令
    命令格式： virsh  控制命令  虚拟机  参数

virsh nodeinfo	查看KVM节点信息
virsh list	列出开启的虚拟机
virsh list --all	列出所有虚拟机(包括没有开启的)
virsh net-list	列出启用的虚拟网络(虚拟交换机)
	一个虚拟网络可以理解为一个交换机，网络交互和物理机器一样的原理，连一个虚拟交换机就是连在一个交换机上，从而可以通信
virsh net-list --all	列出所有虚拟网络(包括没有开启的)
virsh dominfo 虚拟机	查看某个虚拟机的信息(包括没有开启的)
virsh start 虚拟机	使虚拟机开机
virsh reboot 虚拟机	使虚拟机关闭
virsh shutdown 虚拟机	使虚拟机关机(自动关闭服务并关机)
virsh destroy 虚拟机	使虚拟机强制关机(直接切断电源)
virsh autostart 虚拟机	设置虚拟机为真机开机(通电)自启动



！
镜像盘



/var/lib/libvirt/images/
qemu-img命令

    后端模板文件









/etc/libvirt/qemu/networks/vbr.xml
！！！！！！
<network>
  <name>名字(net-list查看的)</name>
  <bridge name='名字(ifconfig查看的)' stp='on' delay='0'/>
  <domain name='名字(net-list查看的)'/>
  <forward mode="nat"/>
  <ip address='192.168.4.254' netmask='255.255.255.0'>
    <dhcp>
      <range start="192.168.1.100" end="192.168.1.200"/>
    </dhcp>
  </ip>
</network>






<domain type='kvm'>
  <name>名字</name>
  <memory unit='KB(后面内存的单位)'>最大内存使用量</memory>
  <currentMemory unit='KB(后面内存的单位)'>当前内存使用量(一般等于最大内存)</currentMemory>
  <vcpu placement='static'>具体cpu个数</vcpu>
  <os>
    <type arch='x86_64(操作系统格式)' machine='pc'>hvm</type>
！    <boot dev='hd(从硬盘引导、cd-rom是从光驱引导)'/>
    <bootmenu enable='yes'/>
    <bios useserial='yes'/>
  </os>
  <features>
    <acpi/>
    <apic/>
  </features>
  <cpu mode='host-passthrough(使用真机cpu，也可以用虚拟cpu用于配置指令级)'>
  </cpu>
  <clock offset='localtime(使用系统事件)'/>
  <on_poweroff>destroy(强制关机命令)</on_poweroff>
  <on_reboot>restart(重启命令)</on_reboot>
  <on_crash>derestart(强制重启命令)</on_crash>
  <devices>
    <emulator>/usr/libexec/qemu-kvm(用什么程序来模拟虚拟机)</emulator>

    <disk type='file' device='disk'>
      <driver name='qemu' type='qcow2'/>
      <source file='/var/lib/libvirt/images/node.img'/>
      <target dev='vda' bus='virtio'/>
    </disk>

    <interface type='bridge'>
      <source bridge='vbr(虚拟交换机名)'/>
      <model type='virtio'/>
    </interface>

    <channel type='unix'>
      <target type='virtio' name='org.qemu.guest_agent.0'/>
    </channel>
    <serial type='pty'></serial>
    <console type='pty'>
      <target type='serial'/>
    </console>
    <memballoon model='virtio'></memballoon>
  </devices>
</domain>




搭建一个虚拟


yum install -y bash-completion


一个机器只能有一个网关，而不是一个网卡接口一个网关






console
























